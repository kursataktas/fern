imports: 
  commons: commons.yml
  types: types.yml
  errors: errors.yml
  service: service.yml
  pagination: pagination.yml
  versioning: versioning.yml
  environments: environments.yml
  auth: auth.yml
  variables: variables.yml

types: 

  ## Fern definition file ## 
  DefinitionFileSchema: 
    extends: 
      - commons.WithDocs
    properties: 
      imports: optional<map<string, string>>
      types: optional<map<string, types.TypeDeclarationSchema>>
      service: optional<service.HttpService>
      errors: optional<map<string, errors.ErrorDeclaration>>

  ## Package marker file ## 
  PackageMarkerFileSchema: 
    extends: DefinitionFileSchema
    properties: 
      navigation: 
        availability: deprecated
        type: optional<Navigation>
      export: optional<Export>
  
  Navigation: 
    discriminated: false
    union:  
      - string
      - list<string>
  
  Export: 
    discriminated: false
    union: 
      - string
      - ExportDetailed
  
  ExportDetailed: 
    properties: 
      dependency: string
      url: optional<string>
  
  ## Root api.yml file ## 
  WithHeaders: 
    properties: 
      headers: 
        type: optional<map<string, service.HttpHeaderSchema>>
        docs: Global Headers for the entire API

  RootApiFileSchema: 
    extends: 
      - commons.WithDocs
      - commons.WithDisplayName
      - environments.WithEnvironments
      - auth.WithAuth
      - WithHeaders
    properties: 
      name: string
      imports: optional<map<string, string>>
      error-discrimination: optional<ErrorDiscrimination>
      audiences: optional<list<string>>
      errors: optional<list<string>>
      base-path: optional<string>
      path-parameters: optional<map<string, service.HttpPathParameterSchema>>
      idempotency-headers: optional<map<string, service.HttpHeaderSchema>>
      variables: optional<map<string, variables.VariableDeclarationSchema>>
      pagination: optional<pagination.PaginationScheme>
      version: optional<versioning.VersionDeclaration> 
      
  
  ErrorDiscrimination: 
    discriminated: false
    union: 
      - PropertyBasedErrorDiscrimination
      - StatusCodeBasedErrorDiscrimination

  PropertyBasedErrorDiscrimination: 
    properties: 
      strategy: literal<"property">
      property-name: string
  
  StatusCodeBasedErrorDiscrimination: 
    properties: 
      strategy: literal<"status-code">
  